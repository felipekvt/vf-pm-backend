import { Router } from 'express';import { prisma } from '../db';import { auth } from '../index';const r=Router();r.get('/',auth,async(req:any,res)=>{res.json(await prisma.asset.findMany({where:{orgId:req.orgId},orderBy:{createdAt:'desc'}}));});r.post('/',auth,async(req:any,res)=>{const {name,location}=req.body||{};if(!name)return res.status(400).json({error:'name obrigatório'});const asset=await prisma.asset.create({data:{name,location,orgId:req.orgId}});res.status(201).json(asset);});r.post('/:assetId/sensors',auth,async(req:any,res)=>{const {assetId}=req.params;const {kind,unit,hi}=req.body||{};if(!kind||!unit)return res.status(400).json({error:'kind e unit obrigatórios'});const s=await prisma.sensor.create({data:{assetId,kind,unit,hi,orgId:req.orgId}});res.status(201).json(s);});export default r;